{"ast":null,"code":"export class TranslationTopic {\n  constructor(options) {\n    this.options = options;\n    this.translators = new Map();\n    this.setTranslator = (name, translator) => {\n      this.translators.set(name, translator);\n    };\n    this.removeTranslator = name => {\n      this.translators.delete(name);\n    };\n    this.i18next = options.i18next;\n    if (options.translators) {\n      Object.entries(options.translators).forEach(([name, translator]) => {\n        this.setTranslator(name, translator);\n      });\n    }\n  }\n}\nconst forwardTranslation = ({\n  value\n}) => value;\nexport class TranslationBuilder {\n  constructor(i18next) {\n    this.i18next = i18next;\n    this.topics = new Map();\n    // need to keep a registration buffer so that translators can be registered once a topic is registered\n    // what does not happen when Streami18n is instantiated but rather once Streami18n.init() is invoked\n    this.translatorRegistrationsBuffer = {};\n    this.registerTopic = (name, Topic) => {\n      let topic = this.topics.get(name);\n      if (!topic) {\n        topic = new Topic({\n          i18next: this.i18next\n        });\n        this.topics.set(name, topic);\n        this.i18next.use({\n          name,\n          process: (value, key, options) => {\n            const topic = this.topics.get(name);\n            if (!topic) return value;\n            return topic.translate(value, key, options);\n          },\n          type: 'postProcessor'\n        });\n      }\n      const additionalTranslatorsToRegister = this.translatorRegistrationsBuffer[name];\n      if (additionalTranslatorsToRegister) {\n        Object.entries(additionalTranslatorsToRegister).forEach(([translatorName, translator]) => {\n          topic.setTranslator(translatorName, translator);\n        });\n        delete this.translatorRegistrationsBuffer[name];\n      }\n      return topic;\n    };\n    this.disableTopic = topicName => {\n      const topic = this.topics.get(topicName);\n      if (!topic) return;\n      this.i18next.use({\n        name: topicName,\n        process: forwardTranslation,\n        type: 'postProcessor'\n      });\n      this.topics.delete(topicName);\n    };\n    this.getTopic = topicName => this.topics.get(topicName);\n  }\n  registerTranslators(topicName, translators) {\n    const topic = this.getTopic(topicName);\n    if (!topic) {\n      if (!this.translatorRegistrationsBuffer[topicName]) this.translatorRegistrationsBuffer[topicName] = {};\n      Object.entries(translators).forEach(([translatorName, translator]) => {\n        this.translatorRegistrationsBuffer[topicName][translatorName] = translator;\n      });\n      return;\n    }\n    Object.entries(translators).forEach(([name, translator]) => {\n      topic.setTranslator(name, translator);\n    });\n  }\n  removeTranslators(topicName, translators) {\n    const topic = this.getTopic(topicName);\n    if (this.translatorRegistrationsBuffer[topicName]) {\n      translators.forEach(translatorName => {\n        delete this.translatorRegistrationsBuffer[topicName][translatorName];\n      });\n    }\n    if (!topic) return;\n    translators.forEach(name => {\n      topic.removeTranslator(name);\n    });\n  }\n}","map":{"version":3,"names":["TranslationTopic","constructor","options","translators","Map","setTranslator","name","translator","set","removeTranslator","delete","i18next","Object","entries","forEach","forwardTranslation","value","TranslationBuilder","topics","translatorRegistrationsBuffer","registerTopic","Topic","topic","get","use","process","key","translate","type","additionalTranslatorsToRegister","translatorName","disableTopic","topicName","getTopic","registerTranslators","removeTranslators"],"sources":["/Users/yashwantmoharil/Desktop/football-battlegrounds/client/node_modules/stream-chat-react/dist/i18n/TranslationBuilder/TranslationBuilder.js"],"sourcesContent":["export class TranslationTopic {\n    constructor(options) {\n        this.options = options;\n        this.translators = new Map();\n        this.setTranslator = (name, translator) => {\n            this.translators.set(name, translator);\n        };\n        this.removeTranslator = (name) => {\n            this.translators.delete(name);\n        };\n        this.i18next = options.i18next;\n        if (options.translators) {\n            Object.entries(options.translators).forEach(([name, translator]) => {\n                this.setTranslator(name, translator);\n            });\n        }\n    }\n}\nconst forwardTranslation = ({ value }) => value;\nexport class TranslationBuilder {\n    constructor(i18next) {\n        this.i18next = i18next;\n        this.topics = new Map();\n        // need to keep a registration buffer so that translators can be registered once a topic is registered\n        // what does not happen when Streami18n is instantiated but rather once Streami18n.init() is invoked\n        this.translatorRegistrationsBuffer = {};\n        this.registerTopic = (name, Topic) => {\n            let topic = this.topics.get(name);\n            if (!topic) {\n                topic = new Topic({ i18next: this.i18next });\n                this.topics.set(name, topic);\n                this.i18next.use({\n                    name,\n                    process: (value, key, options) => {\n                        const topic = this.topics.get(name);\n                        if (!topic)\n                            return value;\n                        return topic.translate(value, key, options);\n                    },\n                    type: 'postProcessor',\n                });\n            }\n            const additionalTranslatorsToRegister = this.translatorRegistrationsBuffer[name];\n            if (additionalTranslatorsToRegister) {\n                Object.entries(additionalTranslatorsToRegister).forEach(([translatorName, translator]) => {\n                    topic.setTranslator(translatorName, translator);\n                });\n                delete this.translatorRegistrationsBuffer[name];\n            }\n            return topic;\n        };\n        this.disableTopic = (topicName) => {\n            const topic = this.topics.get(topicName);\n            if (!topic)\n                return;\n            this.i18next.use({\n                name: topicName,\n                process: forwardTranslation,\n                type: 'postProcessor',\n            });\n            this.topics.delete(topicName);\n        };\n        this.getTopic = (topicName) => this.topics.get(topicName);\n    }\n    registerTranslators(topicName, translators) {\n        const topic = this.getTopic(topicName);\n        if (!topic) {\n            if (!this.translatorRegistrationsBuffer[topicName])\n                this.translatorRegistrationsBuffer[topicName] = {};\n            Object.entries(translators).forEach(([translatorName, translator]) => {\n                this.translatorRegistrationsBuffer[topicName][translatorName] = translator;\n            });\n            return;\n        }\n        Object.entries(translators).forEach(([name, translator]) => {\n            topic.setTranslator(name, translator);\n        });\n    }\n    removeTranslators(topicName, translators) {\n        const topic = this.getTopic(topicName);\n        if (this.translatorRegistrationsBuffer[topicName]) {\n            translators.forEach((translatorName) => {\n                delete this.translatorRegistrationsBuffer[topicName][translatorName];\n            });\n        }\n        if (!topic)\n            return;\n        translators.forEach((name) => {\n            topic.removeTranslator(name);\n        });\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}