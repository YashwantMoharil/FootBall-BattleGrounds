{"ast":null,"code":"import { useCallback, useEffect, useRef, useState } from 'react';\nimport { defaultDateTimeParser, defaultTranslatorFunction, isLanguageSupported, Streami18n } from '../../../i18n';\nexport const useChat = ({\n  client,\n  defaultLanguage = 'en',\n  i18nInstance,\n  initialNavOpen\n}) => {\n  const [translators, setTranslators] = useState({\n    t: defaultTranslatorFunction,\n    tDateTimeParser: defaultDateTimeParser,\n    userLanguage: 'en'\n  });\n  const [channel, setChannel] = useState();\n  const [mutes, setMutes] = useState([]);\n  const [navOpen, setNavOpen] = useState(initialNavOpen);\n  const [latestMessageDatesByChannels, setLatestMessageDatesByChannels] = useState({});\n  const clientMutes = client.user?.mutes ?? [];\n  const closeMobileNav = () => setNavOpen(false);\n  const openMobileNav = () => setTimeout(() => setNavOpen(true), 100);\n  const appSettings = useRef(null);\n  const getAppSettings = () => {\n    if (appSettings.current) {\n      return appSettings.current;\n    }\n    appSettings.current = client.getAppSettings();\n    return appSettings.current;\n  };\n  useEffect(() => {\n    if (!client) return;\n    const version = \"13.2.0\";\n    const userAgent = client.getUserAgent();\n    if (!userAgent.includes('stream-chat-react')) {\n      // result looks like: 'stream-chat-react-2.3.2-stream-chat-javascript-client-browser-2.2.2'\n      // the upper-case text between double underscores is replaced with the actual semantic version of the library\n      client.setUserAgent(`stream-chat-react-${version}-${userAgent}`);\n    }\n    client.threads.registerSubscriptions();\n    client.polls.registerSubscriptions();\n    client.reminders.registerSubscriptions();\n    client.reminders.initTimers();\n    return () => {\n      client.threads.unregisterSubscriptions();\n      client.polls.unregisterSubscriptions();\n      client.reminders.unregisterSubscriptions();\n      client.reminders.clearTimers();\n    };\n  }, [client]);\n  useEffect(() => {\n    setMutes(clientMutes);\n    const handleEvent = event => {\n      setMutes(event.me?.mutes || []);\n    };\n    client.on('notification.mutes_updated', handleEvent);\n    return () => client.off('notification.mutes_updated', handleEvent);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [clientMutes?.length]);\n  useEffect(() => {\n    let userLanguage = client.user?.language;\n    if (!userLanguage) {\n      const browserLanguage = window.navigator.language.slice(0, 2); // just get language code, not country-specific version\n      userLanguage = isLanguageSupported(browserLanguage) ? browserLanguage : defaultLanguage;\n    }\n    const streami18n = i18nInstance || new Streami18n({\n      language: userLanguage\n    });\n    streami18n.registerSetLanguageCallback(t => setTranslators(prevTranslator => ({\n      ...prevTranslator,\n      t\n    })));\n    streami18n.getTranslators().then(translator => {\n      setTranslators({\n        ...translator,\n        userLanguage: userLanguage || defaultLanguage\n      });\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [i18nInstance]);\n  const setActiveChannel = useCallback(async (activeChannel, watchers = {}, event) => {\n    if (event && event.preventDefault) event.preventDefault();\n    if (activeChannel && Object.keys(watchers).length) {\n      await activeChannel.query({\n        watch: true,\n        watchers\n      });\n    }\n    setChannel(activeChannel);\n    closeMobileNav();\n  }, []);\n  useEffect(() => {\n    setLatestMessageDatesByChannels({});\n  }, [client.user?.id]);\n  return {\n    channel,\n    closeMobileNav,\n    getAppSettings,\n    latestMessageDatesByChannels,\n    mutes,\n    navOpen,\n    openMobileNav,\n    setActiveChannel,\n    translators\n  };\n};","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","defaultDateTimeParser","defaultTranslatorFunction","isLanguageSupported","Streami18n","useChat","client","defaultLanguage","i18nInstance","initialNavOpen","translators","setTranslators","t","tDateTimeParser","userLanguage","channel","setChannel","mutes","setMutes","navOpen","setNavOpen","latestMessageDatesByChannels","setLatestMessageDatesByChannels","clientMutes","user","closeMobileNav","openMobileNav","setTimeout","appSettings","getAppSettings","current","version","userAgent","getUserAgent","includes","setUserAgent","threads","registerSubscriptions","polls","reminders","initTimers","unregisterSubscriptions","clearTimers","handleEvent","event","me","on","off","length","language","browserLanguage","window","navigator","slice","streami18n","registerSetLanguageCallback","prevTranslator","getTranslators","then","translator","setActiveChannel","activeChannel","watchers","preventDefault","Object","keys","query","watch","id"],"sources":["/Users/yashwantmoharil/Desktop/football-battlegrounds/client/node_modules/stream-chat-react/dist/components/Chat/hooks/useChat.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nimport { defaultDateTimeParser, defaultTranslatorFunction, isLanguageSupported, Streami18n, } from '../../../i18n';\nexport const useChat = ({ client, defaultLanguage = 'en', i18nInstance, initialNavOpen, }) => {\n    const [translators, setTranslators] = useState({\n        t: defaultTranslatorFunction,\n        tDateTimeParser: defaultDateTimeParser,\n        userLanguage: 'en',\n    });\n    const [channel, setChannel] = useState();\n    const [mutes, setMutes] = useState([]);\n    const [navOpen, setNavOpen] = useState(initialNavOpen);\n    const [latestMessageDatesByChannels, setLatestMessageDatesByChannels] = useState({});\n    const clientMutes = client.user?.mutes ?? [];\n    const closeMobileNav = () => setNavOpen(false);\n    const openMobileNav = () => setTimeout(() => setNavOpen(true), 100);\n    const appSettings = useRef(null);\n    const getAppSettings = () => {\n        if (appSettings.current) {\n            return appSettings.current;\n        }\n        appSettings.current = client.getAppSettings();\n        return appSettings.current;\n    };\n    useEffect(() => {\n        if (!client)\n            return;\n        const version = \"13.2.0\";\n        const userAgent = client.getUserAgent();\n        if (!userAgent.includes('stream-chat-react')) {\n            // result looks like: 'stream-chat-react-2.3.2-stream-chat-javascript-client-browser-2.2.2'\n            // the upper-case text between double underscores is replaced with the actual semantic version of the library\n            client.setUserAgent(`stream-chat-react-${version}-${userAgent}`);\n        }\n        client.threads.registerSubscriptions();\n        client.polls.registerSubscriptions();\n        client.reminders.registerSubscriptions();\n        client.reminders.initTimers();\n        return () => {\n            client.threads.unregisterSubscriptions();\n            client.polls.unregisterSubscriptions();\n            client.reminders.unregisterSubscriptions();\n            client.reminders.clearTimers();\n        };\n    }, [client]);\n    useEffect(() => {\n        setMutes(clientMutes);\n        const handleEvent = (event) => {\n            setMutes(event.me?.mutes || []);\n        };\n        client.on('notification.mutes_updated', handleEvent);\n        return () => client.off('notification.mutes_updated', handleEvent);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [clientMutes?.length]);\n    useEffect(() => {\n        let userLanguage = client.user?.language;\n        if (!userLanguage) {\n            const browserLanguage = window.navigator.language.slice(0, 2); // just get language code, not country-specific version\n            userLanguage = isLanguageSupported(browserLanguage)\n                ? browserLanguage\n                : defaultLanguage;\n        }\n        const streami18n = i18nInstance || new Streami18n({ language: userLanguage });\n        streami18n.registerSetLanguageCallback((t) => setTranslators((prevTranslator) => ({ ...prevTranslator, t })));\n        streami18n.getTranslators().then((translator) => {\n            setTranslators({\n                ...translator,\n                userLanguage: userLanguage || defaultLanguage,\n            });\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [i18nInstance]);\n    const setActiveChannel = useCallback(async (activeChannel, watchers = {}, event) => {\n        if (event && event.preventDefault)\n            event.preventDefault();\n        if (activeChannel && Object.keys(watchers).length) {\n            await activeChannel.query({ watch: true, watchers });\n        }\n        setChannel(activeChannel);\n        closeMobileNav();\n    }, []);\n    useEffect(() => {\n        setLatestMessageDatesByChannels({});\n    }, [client.user?.id]);\n    return {\n        channel,\n        closeMobileNav,\n        getAppSettings,\n        latestMessageDatesByChannels,\n        mutes,\n        navOpen,\n        openMobileNav,\n        setActiveChannel,\n        translators,\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}