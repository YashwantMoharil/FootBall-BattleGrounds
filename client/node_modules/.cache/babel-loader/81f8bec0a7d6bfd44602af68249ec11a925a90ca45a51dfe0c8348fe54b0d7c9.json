{"ast":null,"code":"import clsx from 'clsx';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDialog, useDialogIsOpen } from './hooks';\nimport { useDialogAnchor } from './DialogAnchor';\nexport const ButtonWithSubmenu = ({\n  children,\n  className,\n  placement,\n  Submenu,\n  submenuContainerProps,\n  ...buttonProps\n}) => {\n  const buttonRef = useRef(null);\n  const [dialogContainer, setDialogContainer] = useState(null);\n  const keepSubmenuOpen = useRef(false);\n  const dialogCloseTimeout = useRef(null);\n  const dialogId = useMemo(() => `submenu-${Math.random().toString(36).slice(2)}`, []);\n  const dialog = useDialog({\n    id: dialogId\n  });\n  const dialogIsOpen = useDialogIsOpen(dialogId);\n  const {\n    attributes,\n    setPopperElement,\n    styles\n  } = useDialogAnchor({\n    open: dialogIsOpen,\n    placement,\n    referenceElement: buttonRef.current\n  });\n  const closeDialogLazily = useCallback(() => {\n    if (dialogCloseTimeout.current) clearTimeout(dialogCloseTimeout.current);\n    dialogCloseTimeout.current = setTimeout(() => {\n      if (keepSubmenuOpen.current) return;\n      dialog.close();\n    }, 100);\n  }, [dialog]);\n  const handleClose = useCallback(event => {\n    const parentButton = buttonRef.current;\n    if (!dialogIsOpen || !parentButton) return;\n    event.stopPropagation();\n    closeDialogLazily();\n    parentButton.focus();\n  }, [closeDialogLazily, dialogIsOpen, buttonRef]);\n  const handleFocusParentButton = () => {\n    if (dialogIsOpen) return;\n    dialog.open();\n    keepSubmenuOpen.current = true;\n  };\n  useEffect(() => {\n    const parentButton = buttonRef.current;\n    if (!dialogIsOpen || !parentButton) return;\n    const hideOnEscape = event => {\n      if (event.key !== 'Escape') return;\n      handleClose(event);\n      keepSubmenuOpen.current = false;\n    };\n    document.addEventListener('keyup', hideOnEscape, {\n      capture: true\n    });\n    return () => {\n      document.removeEventListener('keyup', hideOnEscape, {\n        capture: true\n      });\n    };\n  }, [dialogIsOpen, handleClose]);\n  return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    \"aria-selected\": 'false',\n    className: clsx(className, 'str_chat__button-with-submenu', {\n      'str_chat__button-with-submenu--submenu-open': dialogIsOpen\n    }),\n    onBlur: () => {\n      keepSubmenuOpen.current = false;\n      closeDialogLazily();\n    },\n    onClick: event => {\n      event.stopPropagation();\n      dialog.toggle();\n    },\n    onFocus: handleFocusParentButton,\n    onMouseEnter: handleFocusParentButton,\n    onMouseLeave: () => {\n      keepSubmenuOpen.current = false;\n      closeDialogLazily();\n    },\n    ref: buttonRef,\n    role: 'option',\n    ...buttonProps\n  }, children), dialogIsOpen && React.createElement(\"div\", {\n    ...attributes.popper,\n    onBlur: event => {\n      const isBlurredDescendant = event.relatedTarget instanceof Node && dialogContainer?.contains(event.relatedTarget);\n      if (isBlurredDescendant) return;\n      keepSubmenuOpen.current = false;\n      closeDialogLazily();\n    },\n    onFocus: () => {\n      keepSubmenuOpen.current = true;\n    },\n    onMouseEnter: () => {\n      keepSubmenuOpen.current = true;\n    },\n    onMouseLeave: () => {\n      keepSubmenuOpen.current = false;\n      closeDialogLazily();\n    },\n    ref: element => {\n      setPopperElement(element);\n      setDialogContainer(element);\n    },\n    style: styles.popper,\n    tabIndex: -1,\n    ...submenuContainerProps\n  }, React.createElement(Submenu, null)));\n};","map":{"version":3,"names":["clsx","React","useCallback","useEffect","useMemo","useRef","useState","useDialog","useDialogIsOpen","useDialogAnchor","ButtonWithSubmenu","children","className","placement","Submenu","submenuContainerProps","buttonProps","buttonRef","dialogContainer","setDialogContainer","keepSubmenuOpen","dialogCloseTimeout","dialogId","Math","random","toString","slice","dialog","id","dialogIsOpen","attributes","setPopperElement","styles","open","referenceElement","current","closeDialogLazily","clearTimeout","setTimeout","close","handleClose","event","parentButton","stopPropagation","focus","handleFocusParentButton","hideOnEscape","key","document","addEventListener","capture","removeEventListener","createElement","Fragment","onBlur","onClick","toggle","onFocus","onMouseEnter","onMouseLeave","ref","role","popper","isBlurredDescendant","relatedTarget","Node","contains","element","style","tabIndex"],"sources":["/Users/yashwantmoharil/Desktop/football-battlegrounds/client/node_modules/stream-chat-react/dist/components/Dialog/ButtonWithSubmenu.js"],"sourcesContent":["import clsx from 'clsx';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDialog, useDialogIsOpen } from './hooks';\nimport { useDialogAnchor } from './DialogAnchor';\nexport const ButtonWithSubmenu = ({ children, className, placement, Submenu, submenuContainerProps, ...buttonProps }) => {\n    const buttonRef = useRef(null);\n    const [dialogContainer, setDialogContainer] = useState(null);\n    const keepSubmenuOpen = useRef(false);\n    const dialogCloseTimeout = useRef(null);\n    const dialogId = useMemo(() => `submenu-${Math.random().toString(36).slice(2)}`, []);\n    const dialog = useDialog({ id: dialogId });\n    const dialogIsOpen = useDialogIsOpen(dialogId);\n    const { attributes, setPopperElement, styles } = useDialogAnchor({\n        open: dialogIsOpen,\n        placement,\n        referenceElement: buttonRef.current,\n    });\n    const closeDialogLazily = useCallback(() => {\n        if (dialogCloseTimeout.current)\n            clearTimeout(dialogCloseTimeout.current);\n        dialogCloseTimeout.current = setTimeout(() => {\n            if (keepSubmenuOpen.current)\n                return;\n            dialog.close();\n        }, 100);\n    }, [dialog]);\n    const handleClose = useCallback((event) => {\n        const parentButton = buttonRef.current;\n        if (!dialogIsOpen || !parentButton)\n            return;\n        event.stopPropagation();\n        closeDialogLazily();\n        parentButton.focus();\n    }, [closeDialogLazily, dialogIsOpen, buttonRef]);\n    const handleFocusParentButton = () => {\n        if (dialogIsOpen)\n            return;\n        dialog.open();\n        keepSubmenuOpen.current = true;\n    };\n    useEffect(() => {\n        const parentButton = buttonRef.current;\n        if (!dialogIsOpen || !parentButton)\n            return;\n        const hideOnEscape = (event) => {\n            if (event.key !== 'Escape')\n                return;\n            handleClose(event);\n            keepSubmenuOpen.current = false;\n        };\n        document.addEventListener('keyup', hideOnEscape, { capture: true });\n        return () => {\n            document.removeEventListener('keyup', hideOnEscape, { capture: true });\n        };\n    }, [dialogIsOpen, handleClose]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"button\", { \"aria-selected\": 'false', className: clsx(className, 'str_chat__button-with-submenu', {\n                'str_chat__button-with-submenu--submenu-open': dialogIsOpen,\n            }), onBlur: () => {\n                keepSubmenuOpen.current = false;\n                closeDialogLazily();\n            }, onClick: (event) => {\n                event.stopPropagation();\n                dialog.toggle();\n            }, onFocus: handleFocusParentButton, onMouseEnter: handleFocusParentButton, onMouseLeave: () => {\n                keepSubmenuOpen.current = false;\n                closeDialogLazily();\n            }, ref: buttonRef, role: 'option', ...buttonProps }, children),\n        dialogIsOpen && (React.createElement(\"div\", { ...attributes.popper, onBlur: (event) => {\n                const isBlurredDescendant = event.relatedTarget instanceof Node &&\n                    dialogContainer?.contains(event.relatedTarget);\n                if (isBlurredDescendant)\n                    return;\n                keepSubmenuOpen.current = false;\n                closeDialogLazily();\n            }, onFocus: () => {\n                keepSubmenuOpen.current = true;\n            }, onMouseEnter: () => {\n                keepSubmenuOpen.current = true;\n            }, onMouseLeave: () => {\n                keepSubmenuOpen.current = false;\n                closeDialogLazily();\n            }, ref: (element) => {\n                setPopperElement(element);\n                setDialogContainer(element);\n            }, style: styles.popper, tabIndex: -1, ...submenuContainerProps },\n            React.createElement(Submenu, null)))));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}